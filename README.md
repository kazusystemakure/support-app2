# アプリケーション名
## スキマ健康
### 「スキマ時間で、広島を健康にする」

# 概要
### オンラインでの運動レッスンプラットフォーム（広島）のアプリケーションで作成しました。
### 目的はスキマ時間を運動や健康で埋め、広島を健康にすること。
### (講師)オンラインレッスンをスキマ時間で開催する。申込者に対してZoomで開催。
### (参加者)スキマ時間に、運動オンラインレッスンを購入（クレジット決済）して、Zoomより参加する。

# URL
### http://52.193.45.139/

![スキマ健康トップページ](https://user-images.githubusercontent.com/70381817/96676779-1f45c900-13a9-11eb-8237-1424538d5a23.gif)

# テスト用アカウント
### Basic認証 
#### ID: supportadmin  Password: 123123123
### テストアカウント
#### インストラクター(レッスン投稿者) メールアドレス: yamada@gmail.com   Password: yamada123
#### 参加者(レッスン購入者)       メールアドレス: suzuki@gmail.com    Password: suzuki123
### 購入カード情報
#### 番号: 4242424242424242(16桁) 期限; MM/YY 11/23  CVC: 123

# 利用方法
### ・WebブラウザGoogle Chromeの最新版を利用してアクセスしてください。
### ・ただしデプロイ等で接続できないタイミングもございます。その際は少し時間をおいてから接続してください。
### ・接続先およびログイン情報については、上記の通りです。
### ・同時に複数の方がログインしている場合に、ログインできない可能性があります。
### ・レッスン追加方法（インストラクターログイン）
#### インストラクターテストアカウントでログイン→トップページ→名前をクリックしマイページへ→マイページで新規レッスン追加ボタン押→レッスン追加情報入力→
### ・レッスン購入方法（参加者ログイン）
#### 参加者テストアカウントでログイン→トップページのレッスン一覧からレッスンを選択→レッスン詳細確認→レッスン購入→マイページに購入したレッスンが表示→レッスン詳細にZoom IDとパスワード表示
### ・確認後、ログアウト処理をお願いします。

# 目指した課題解決
## 「人のヤカンの水の温度を適温にする」

## 現状と課題
### ①人生100年時代で、長く働き、長く遊ぶ。寿命が延びてライフスタイルが変化する状況下では、健康に投資する時代になった。
### ②仕事、家事、育児、男女関係なく、誰もが忙しい時代に、運動のために時間をとれない。
### ③時間の価値が高まり、可処分時間の奪い合いに、運動は選択されずらい。
### ④しかし、当然ながら忙しくなれば、疲れやストレスが増え、ストレスの蓄積はパフォーマンスの低下、病気に繋がる。

## 課題解決
### 多くの人が忙しく、運動の時間を取りずらい中で、スキマ時間を運動や健康で埋め、広島を健康にする。
### ・ヤカンの水が熱くなり、イライラやストレスが蓄積しているなら、ヤカンの水の温度を下げ、
### ・ヤカンの水が冷たく、不安やネガティブな状態であるなら、ヤカンの水の温度上げる。
### 健康とは、人として高いパフォーマンス状態、幸福感を感じやすい状態で、「ヤカンの水の温度が適温状態」であること。我々は、スキマ時間で健康を目指す。

### [対象者 例]
### ・在宅ワーク、仕事で精神的にも疲れが蓄積しているサラリーマン
### ・働きながら家事と育児をこなし、疲労やストレスが解消しきれないママ
### ・運動しないといけない。とは思いながらも、一人では継続できない方
### ・自身のパフォーマンスに気を遣うサラリーマン、アスリート

## 継続サポート
### ・インストラクターは広島で活動する人たちで、物理的親近感と、親しみのある雰囲気で、運動を楽しみながら継続をサポート。
### ・健康は知識の習得ではなく、自分自身が体験から獲得するもので、No.1講師である必要はなく、親近感の方が重要だ。


# 要件定義

| 機能            | 目的                                   | 詳細                                   |ストーリー（ユースケース）                     |
| ---------------| ---------------------------------------| --------------------------------------| ------------------------------------------|
| ユーザー機能     | ユーザー登録/ログイン/ログアウト            | ユーザー新規登録、ログイン/ログアウト機能    | ・新規登録画面より、ユーザー登録               |
|                |                                        |                                       | ・画像、名前、フリガナ、email、パスワード、     |
|                |                                        |                                       | 郵便番号,住所,電話番号, 生年月日を入力。        |
|                |                                        |                                       |・インストラクター希望者は、プロフィール公開選択   |
|                |                                        |                                       | 種目/スキル 自己紹介を入力                    |
|                |                                        |                                       |・ログイン画面よりemailとパスワードにてログイン   |
|レッスン追加機能   | ログインユーザーが新規レッスン追加          | 新規レッスン追加画面でレッスンの内容及び、   | ・レッスン画、名前、運動量、説明、開催日時、価格   |
|                |                                        | 開催にあたりzoom情報も入力。              | Zoom ID、Passwordを入力。                   |
|レッスン一覧機能  | トップページに開催レッスン一覧表示           | トップページに開催レッスン一覧表示          | ・トップページに追加されたレッスン一覧を表示      |
|                |                                        |                                       | ・日付が経過したレッスンは、一覧表示から削除     |
|レッスン詳細機能   | レッスン詳細の確認。編集、削除、購入ボタン表示 | レッスン詳細表示。                      | ・レッスンを選択すると詳細ページへ遷移。          |
|                |                                        | 投稿者本人の場合、編集ボタンと削除ボタン表示 | ・画像、レッスン名、運動量、内容、日時、価格 表示  |
|                |                                        | 投稿者でない場合、購入ボタンの表示。        | ・講師記載（インストラクターのマイページへ遷移    |
|                |                                        |                                       | ・レッスン購入後は、Zoom IDとパスワードが表示    |
|                |                                        |                                       | ・レッスン購入後は、購入ボタンを非表示           |
|                |                                        |                                       | ・レッスン投稿者本人の場合、購入画面は非表示      |
|                |                                        |                                       | ・レッスン投稿者本人は、編集と削除ボタンを表示    |
|レッスン購入機能   | ログインしたユーザーが、レッスンを購入。     | レッスン購入画面にて、カード情報を入力後、    | ・レッスン画像、名前、料金を表示を確認          |
|                | Zoom IDとPasswordを取得。               | 稿購入ボタンを押すと購入が完了。(PAYJP)     | ・カード情報入力（名前、カード番号、年月、CVC）   |
|                |                                        |                                       | ・購入ボタンを押すと購入完了                   |
|レッスン編集機能   | レッスン投稿者のみ、レッスンを編集可         | レッスン詳細を投稿者が編集可能             | ・編集した内容を修正。画像は再設定。            |
|                |                                        |                                       | ・変更ボタンでレッスン編集完了                 |
|マイページ機能    | header部の名前クリックでマイページ遷移       | 名前、購入レッスン、開催レッスンを表示       | ・ユーザー編集ボタンは自身のみ表示。            |
|                | 自分の情報を確認可。                       | インストラクターは、種目、紹介文、SNS、     | ・インストラクターは、画像、名前、種目/スキル、   |
|                |                                        |  新規レッスン追加ボタンを表示              | 自己紹介、SNS、開催レッスン一覧を表示。         |
|                |                                        |                                       | ・インストラクターページは、他ユーザーも閲覧可能  |
|                |                                        |                                       | ・開催レッスンで日付が経過したものはENDラベル表示 |
|                |                                        |                                       | ・その他のユーザーは、画像、名前、購入レッスン表示 |
|ユーザー編集機能   | ユーザー登録情報の編集可                   | ユーザー自身のみ編集可、変更ボタンで編集完了 | ・ユーザー情報編集後、変更ボタンで編集完了       |
|                |                                        |                                       | ・ユーザー自身のみ編集可能                    |
|インストラクター紹介| インストラクターを一覧表示                 | インストラクター登録のユーザーを一覧表示     | ・画像と名前、種目を表示                      |
|                |                                        |                                       | ・インストラクタークリックでマイページへ        |


# 実装機能説明(Gyazo GIF)

![スキマ健康トップページ](https://user-images.githubusercontent.com/70381817/96676779-1f45c900-13a9-11eb-8237-1424538d5a23.gif)

### トップページ全体(レッスン一覧)
### https://gyazo.com/1035a9a59c71777870096a4a725ca50e

### ユーザー新規登録
### https://gyazo.com/a07656341888da47839e2ebb4b3afc84

### ユーザーログイン
### https://gyazo.com/84698c4d248523dc364af96a7b5b0bff

### マイページ（インストラクターログイン後）
### https://gyazo.com/fb7925b5b4e693f88164b4dbb485c547

### 新規レッスン追加
### https://gyazo.com/d2038c7fb0f8058f118115c97864dcaa

### レッスン詳細ページ
### https://gyazo.com/57c1362cca4e8293f5e2f98db811bf51

### レッスン編集ページ
### https://gyazo.com/4667ed0dc7224ebf3d944888a5a198c0

### レッスン削除
### https://gyazo.com/f414250683ef92204dfc50b875b7a5f4

### レッスン購入(参加者ログイン後)
### https://gyazo.com/98ebc8fc64b99d41cfae059e89f45dde
### https://gyazo.com/4c99e0348101697c911b1ebf2a5257a0

### レッスン購入後、マイページへ(Zoom情報確認)
### https://gyazo.com/fda0239ca2bac9a2d5ba2dbc99fcf64f
### https://gyazo.com/12b946b49a33bbbb27d8ab9ca394e868

### ユーザー情報編集
### https://gyazo.com/aef3a8ee57a081d98811290f0be4b9aa

### インストラクター一覧表示(2名登録中)
### https://gyazo.com/c76d5def1bc028fdb7cb1bbc62d7058c

### インストラクター一覧からインストラクターマイページへ（参加者ログイン）
### https://gyazo.com/2238103ce14ad6b197ed6db8c7c6574c


# 実装予定機能
### 検討中


# データベース設計
### ER図
### https://gyazo.com/469f01ab6e9596108411aa6ea4ca6ebe

# 画面遷移図
### https://gyazo.com/a40d965a0e62b7a962f88d0118b586dd


# テーブル設計

## users テーブル

| Column                | Type        | Options                                     |
| --------------------- | ------------| --------------------------------------------|
| name                  | string      | null: false                                 |
| name_kane             | string      | null: false                                 |
| introduction          | string      |                                             |
| email                 | string      | null: false                                 |
| encrypted_password    | string      | null: false                                 |
| postal_code           | string      | null: false                                 |
| prefecture            | string      | null: false                                 |
| city                  | string      | null: false                                 |
| address               | string      | null: false                                 |
| phone_number          | string      | null: false                                 |
| birth_date            | date        | null: false                                 |
| skill                 | string      |                                             |
| publish_id            | integer     |                                             |

### Association
- has_many :lessons
- has_many :orders


## lessons テーブル

| Column                | Type        | Options                                     |
| --------------------- | ------------| --------------------------------------------|
| name                  | string      | null: false                                 |
| text                  | string      | null: false                                 |
| level_id              | integer     | null: false                                 |
| lesson_date           | date        | null: false                                 |
| bigin_at              | time        | null: false                                 |
| closed_at             | time        | null: false                                 |
| price                 | string      | null: false                                 |
| zoom_url              | string      | null: false                                 |
| zoom_password         | string      | null: false                                 |
| user_id               | references  | null: false, null: false, foreign_key: true |

### Association
- belongs_to :user
- has_many :orders


## orders テーブル

| Column                | Type        | Options                                     |
| --------------------- | ------------| --------------------------------------------|
| user_id               | references  | null: false, null: false, foreign_key: true |
| lesson_id             | references  | null: false, null: false, foreign_key: true |

### Association
- belongs_to :user
- belongs_to :lesson


# ローカルでの動作方法(コマンド入力)
### git clone [support-app2]
### rails _6.0.0_ new pictweet -d mysql
### bundle install
### yarn install
### rails db:create
### rails db:migrate
### rails s

### rails (6.0.3.3)
### ruby 2.6.5
### payjp (0.0.7)